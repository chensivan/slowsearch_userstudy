<!DOCTYPE html>
<html>

<head>
    <script data-require="jquery@2.2.0" data-semver="2.2.0" src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.3/angular.min.js"></script>
    <script src="https://rawgit.com/rzajac/angularjs-slider/master/dist/rzslider.js"></script>
    <script src="https://rawgithub.com/ajaxorg/ace-builds/v1.2.3/src-min-noconflict/ace.js"></script>
    <script src="https://rawgithub.com/angular-ui/ui-ace/bower/ui-ace.min.js"></script>
    <script src="//angular-ui.github.io/bootstrap/ui-bootstrap-tpls-1.3.3.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.5.3/angular-animate.js"></script>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://rawgit.com/rzajac/angularjs-slider/master/dist/rzslider.css" />
    <link data-require="bootstrap-css@3.3.6" data-semver="3.3.6" rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="style.css" />
    <script src="script.js"></script>
</head>

<body>
    <div ng-app="myapp">
        <div ng-controller="TestController">

            <!-- ********* Consent Form ********** -->
            <div ng-show="showConsent">

                <h2>Consent Form</h2>
                <p>In this study, you will need to do XYZ.</p>
                <br>
                <label>You must check the box to continue
                    <input type="checkbox" ng-click="isToggled()">
                </label>
                <br>
                <button class="btn btn-xs btn-primary" ng-disabled="disableSubmit" ng-click="submitConsent()">Continue</button>

            </div>

            <!-- ********* Quiz ********** -->

            <div id="knowledgeEva" ng-show="showQuiz">
                Please make sure you <b>select answer in each question</b> , as lack of answer is not checked and counts as failure. The final score is simply a number of wrong answers, less is better. Quiz requires Javascript to be enabled.

                <div ng-repeat="(key,task) in quiz">
                    <h3>Task {{key+1}}</h3>
                    <h3>
            <pre>{{task.question}}</pre>
            </h3>
                    <br />
                    <div ng-repeat="option in task.options">
                        <label>
                            <input type="radio" name="{{task.option}}" ng-model="quizAnswer.question[$parent.key]" value="{{option}}" checked="false" /> {{option}}
                        </label>
                    </div>
                </div>
                <div style="display: inline-block;"
         uib-tooltip="Make sure you do all the questions before submit!">
                <input type="button" class="btn btn-xs btn-primary" value="Submit" ng-click="submitQuiz()">
                </div>

            </div>


            <!-- ********* Tasks ********** -->

            <div id="wrapper" ng-if="showWrapper">

                <!-- ********* Subjective Tasks ********** -->

                <div id="task(A)" ng-show="showTask">

                    <div ng-repeat="taskA in taskAs" ng-show="taskA.id == idCounter">
                        <h2>{{taskA.name}}</h2>
                        <pre>{{taskA.description}}</pre>
                        <p>Please take a look at the following three versions of answers. Drag the radio button to tell us how long are you willing to wait for that version of answer.</p>
                    </div>

                    <div id="answer" ng-repeat="answer in answers">
                      <p>
                        <div ng-repeat="(level, levels_content) in answer.answer" ng-show="level == (idCounter-1)">
                            <pre>{{levels_content}}</pre>
                        </div>
                        <div>
                            <rzslider rz-slider-model="answer.value" rz-slider-options="answer.options" ng-click="isClicked()"></rzslider>
                        </div>
                        <p>Willingness to wait for: {{answer.value}} minutes</p>
                    </div>
                    <br>

<!--                    add tooltip-->
                    <div style="display: inline-block;"
         uib-tooltip="Remember to select all the choices!">
                    <button ng-click="submit()" class="btn btn-xs btn-success" ng-disabled="disableSubmit">Submit</button>
                    </div>


                </div>

                <!-- ********* Objective Tasks ********** -->

                <div id="task(B)" ng-show="!showTask">
                    <div ng-repeat="task in tasks" ng-if="task.id == idCounter">
                        <h2>{{task.name}}</h2>
                        <br>
                        <pre>{{task.description}}</pre>
                        <br>

                        <section id="editors">
                            <div class="ace_editor" id='task1' ui-ace="{onLoad:aceLoaded}" ng-model="task.content"></div>
                            <button ng-click="run(task.content,task.correctOutput)" class="btn btn-xs btn-primary" type="button"> run </button>
                            <div id="output">
                                <h3>Result</h3>
                                <br> {{consoleOutput}}
                            </div>
                            <br> {{msg}}
                        </section>
                    </div>

                    <!--   add tooltip-->
                    <div style="display: inline-block;" uib-tooltip="You can only proceed after getting the correct output!">
                      <button ng-click="nextTask()" class="btn btn-xs btn-primary" type="button" ng-disabled="disableNext"> Next </button>
                    </div>

                    <!-- <button ng-click="run()" class="btn btn-xs btn-primary pull-right" type="button"> run </button> -->
                </div>

            </div>

            <!-- ********* End of  Tasks / Goodbye page********** -->

            <div ng-show="finalpage">
                <h2> Thank you for your participation! We will compensate you soon.</h2>
            </div>


        </div>
    </div>
</body>

</html>
